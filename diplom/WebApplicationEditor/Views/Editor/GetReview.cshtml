@using BisnessLogic.Models
@model (BisnessLogic.Models.Review, string[])
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
</head>
<body>
    <script>
        function updateStatus() {
            var sel = document.getElementById('status').value;
            Swal.fire('Status: '+sel)
        }
    </script>
    <header>
        <nav>
            <ul class="topmenu">
                <li>
                    <a asp-area="" asp-controller="Home" asp-action="Main">Научный журнал</a>
                </li>

                <li>
                    <a href="" class="submenu-link">Рецензенты</a>
                    <ul class="submenu">
                        <li><a href="../Editor/Reviewers">Список рецензентов</a></li>
                        <li><a href="../Editor/Register">Регистрация рецензента</a></li>
                    </ul>
                </li>
                <li>
                    <a class="submenu-link">Выпуски журнала</a>
                    <ul class="submenu">
                        <li><a href="../Editor/CreateMagazine">Формировать научный журнал</a></li>
                        <li><a href="../Editor/Magazines">Список выпусков</a></li>
                    </ul>
                </li>

                <li>
                    <a href="../Editor/Publications">Список статей</a>
                </li>
            </ul>
        </nav>
    </header>

    <h3 style="text-align:center">Результаты рецензирования:</h3>
    <form method="post">
        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <input name="PublicId" style="display:none" type="text" value="@Model.Item1.PublicId">
                    <label style="font-weight:bold">Рубрика(и):</label><br />
                    <p id="categories">
                        @foreach (var c in Model.Item1.Categories.Split(','))
                        {
                            <input id="Checkbox1" name="category" type="checkbox" value="@c" checked>@c<br />
                        }
                    </p>

                    <label style="font-weight:bold">Новизна:</label>
                    <div id="novizna">
                        @foreach (var n in Model.Item1.New.Split(','))
                        {
                            <input name="novizna" type="checkbox" value="@n" checked>@n<br />
                        }

                    </div>
                    <div>
                        <label style="font-weight:bold">Укажите, в чем именно состоит новизна:</label><br />
                        <textarea id="TextNew" style="width:auto" name="textNew" rows="10"
                                  minlength="120" required>@Model.Item1.CommentNew</textarea>
                    </div>
                    <div>
                        <label style="font-weight:bold">Корректность работы и полученных выводов:</label>
                        <p id="corect">
                            @foreach (var n in Model.Item1.Correctness.Split(','))
                            {
                                <input name="corect" type="checkbox" value="@n" checked>@n<br />
                            }
                        </p>

                    </div>

                    <div id="TextErorrs">
                        @if (Model.Item1.CommentCorrectness != null && Model.Item1.CommentCorrectness.Length > 0)
                        {
                            <label style="font-weight:bold">Укажите, в чем именно содержатся ошибки:</label><br />
                            <textarea id="TextNew" style="width:auto" name="textNew" rows="10"
                                      minlength="120" required>@Model.Item1.CommentCorrectness</textarea>
                        }
                    </div>

                    <div>
                        <label style="font-weight:bold">Значимость работы:</label><br>
                        <p id="znach">
                            @foreach (var n in Model.Item1.Znach.Split(','))
                            {
                                <input name="znach" type="checkbox" value="@n" checked>@n<br />
                            }
                        </p>
                    </div>
                    <div>
                        <label style="font-weight:bold">
                            Укажите, для какого круга специалистов статья будет интересна, в том числе
                            практическую значимость работы, оцените перспективу реализации результатов.
                        </label>
                        <textarea id="TextZnach" name="textZnach" rows="10" minlength="120" required>
                            @Model.Item1.CommentZnach</textarea>
                    </div>
                </div>

                <div class="col-sm">
                    <label style="font-weight:bold">Полнота исследования:</label>
                    <p id="polnota">
                        @foreach (var p in Model.Item1.Polnota.Split(','))
                        {
                            <input name="polnota" type="checkbox" value="@p" checked>@p<br />
                        }
                    </p>
                    <div>
                        @if (Model.Item1.CommentPolnota != null && Model.Item1.CommentPolnota.Length > 0)
                        {
                            <label style="font-weight:bold">Распишите более подробно:</label><br />
                            <textarea id="textPolnota" name="textPolnote" rows="10" minlength="120">
                            @Model.Item1.CommentPolnota</textarea><br />
                        }
                    </div>

                    <label style="font-weight:bold">Ясность изложения:</label>
                    <p id="izloj">
                        @foreach (var i in Model.Item1.Clarity.Split(','))
                        {
                            <input name="izloj" type="checkbox" checked
                                   value="@i">@i<br />
                            }
                    </p>
                    <div>
                        @if (Model.Item1.CommentClarity != null && Model.Item1.CommentClarity.Length > 0)
                        {
                            <label style="font-weight:bold">Распишите более подробно:</label><br />
                            <textarea id="textPolnota" name="textPolnote" rows="10" minlength="120">
                            @Model.Item1.CommentClarity</textarea><br />
                        }
                    </div>

                    <label style="font-weight:bold">Рекомендации:</label>
                    <p id="recomend">
                        @foreach (var r in Model.Item1.Recomend.Split(','))
                        {
                            <input name="recomends" type="checkbox" checked
                                   value="@r">@r<br />
                            }
                    </p>
                    <div>
                        @if (Model.Item1.CommentRecomend != null && Model.Item1.CommentRecomend.Length > 0)
                        {
                            <label style="font-weight:bold">Распишите более подробно:</label><br />
                            <textarea id="textRecomend" name="textRecomend" rows="10" minlength="120">
                            @Model.Item1.CommentRecomend</textarea><br />
                        }
                    </div>
                </div>

                <div class="col-sm">
                    <label style="font-weight:bold">Общее впечатление от работы:</label>
                    <p id="result">
                        @foreach (var r in Model.Item1.Result.Split(','))
                        {
                            <input name="results" type="checkbox" checked
                                   value=@r>@r<br />
                            }
                    </p>
                    <label style="font-weight:bold">Приведите ниже развернутую оценку содержания статьи:</label><br />
                    <textarea id="TextResult" name="textResult" rows="10" minlength="120" required>
                        @Model.Item1.CommentResult</textarea><br />
                    <label style="font-weight:bold">
                        Наличие обязательных блоков текста: аннотации, ключевых слов, списка источников, авторского блока с адресами.
                        Соответствие техническим требованиям оформления: параметры страниц, стили, иллюстрации, библиография, рекомендуемый объем.
                    </label>
                    <p id="blocks">
                        @foreach (var b in Model.Item1.HasBlocks.Split(','))
                        {
                            <input id="result1" name="blocks" type="checkbox" checked
                                   value="@b">@b<br />
                            }
                    </p>
                    <label style="font-weight:bold">Заключение о публикации статьи:</label>
                    <p id="zakl">
                        @foreach (var z in Model.Item1.Conclusion.Split(','))
                        {
                            <input name="zakls" type="checkbox" checked
                                   value="@z">@z<br />
                            }
                    </p>
                </div>
            </div>
            
            <div class="row">
                @if (Model.Item2.Length != 0)
                {
                    <div class="alert alert-primary" role="alert">
                        <strong>@Model.Item2.ElementAt(0)</strong>@Model.Item2.ElementAt(1)
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <br />
                }
                <label style="font-weight:bold">Решение:</label>
                <label>Перевести данную статью в статус:</label>
                <select id="status" name="status" required>
                    <option selected disabled value="">Выберите...</option>
                    <option value="@Status.Готова_к_публикации">@Status.Готова_к_публикации</option>
                    <option value="@Status.Отправлена_на_дороботку">@Status.Отправлена_на_дороботку</option>
                </select>
                <button id="Save" class="btn btn-primary" type="submit" asp-controller="Editor" asp-action="UpdateStatus">Изменить</button>
            </div>
        </div>
    </form>
</body>
</html>

@model (BisnessLogic.Models.Publication, List<string>, string[])
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
</head>
<body>
    <script>
        function printTextbox(nameId) {
            var text = document.getElementById(nameId);
            var input = text.getElementsByTagName('textarea').item(0);
            var dis = text.style.display;
            if (dis == 'none') {
                text.style.display = "block";
                input.setAttribute('required', '');
            }
            else {
                text.style.display = "none";
                input.removeAttribute('required');
            }
        }

        function cheakCount(name, razdel) {
            var data = document.getElementById(name);
            var inputs = data.getElementsByTagName("input");
            var count = 0;
            for (var i = 0; i < inputs.length; i++) {
                if (inputs.item(i).checked) {
                    count = count + 1;
                }
            }
            if (count == 0) {
                Swal.fire("Выберите хотя бы один пункт из раздела " + razdel);
                return false;
            }
            //else { return count; }
        }

        function cheakText(name, razdel) {
            var text = document.getElementById(name);
            if (text.style.display != 'none' && text.value.length == 0) {
                Swal.fire("Заполните текстовое поле для раздела " + razdel);
                return false;
            }
        }

        function getValue(name) {
            var data = document.getElementById(name);
            var inputs = data.getElementsByTagName("input");
            var res = '';
            for (var i = 0; i < inputs.length; i++) {
                if (inputs.item(i).checked) {
                    res = inputs.item(i).value+','+res;
                }
            }
            return res;
        }
        function create() {
            if (proverka != false) {
                var f = document.forms['form'];
                f.submit();
            }
        }
        function cheakInputCount(name, razdel) {
            var data = cheakCount(name, razdel);
        }
        function proverka() {
            var comNew = document.getElementById('TextNew').value;
            if (comNew.length == 0) {
                Swal.fire('Заполните текстовое поле Новизна.')
                return false;
            }
            var textE = document.getElementById('TextEror').value;
            if (textE.style.display != 'none' && textE.length == 0) {
                Swal.fire('Заполните текстовое поле содержания ошибок.')
                return false;
            }
            if (textZ.length == 0) {
                Swal.fire('Заполните текстовое поле для какого круга специалистов статья будет интересна.')
                return false;
            }
            var textR = document.getElementById('TextResult').value;

            if (textR.length == 0) {
                Swal.fire('Заполните текстовое поле для развернутой оценки содержания статьи.')
                return false;
            }
            var textPolnota = document.getElementById('TextPolnota');
            if (textPolnota.style.display != 'none' && textPolnota.value.length == 0) {
                Swal.fire('Заполните текстовое поле для полноты статьи.')
                return false;
            }

            var textIzloj = document.getElementById('TextIzloj');
            if (textIzloj.style.display != 'none' && textIzloj.value.length == 0) {
                Swal.fire('Заполните текстовое поле для ясности изложения.')
                return false;
            }
            var textRecomend = document.getElementById('TextRecomend');
            if (textRecomend.style.display != 'none' && textRecomend.value.length == 0) {
                Swal.fire('Заполните текстовое поле для рекомендации.')
                return false;
            }
            return true;
            //Swal.fire('submit');
            //return true;
            /*
            var res = cheakCount('zakl', 'Заключение о публикации статьи');
            //Swal.fire(res);
            if (res != false) {
                var _new = getValue('novizna');
                var comNew = document.getElementById('TextNew').value;

                if (comNew.length == 0) {
                    Swal.fire('Заполните текстовое поле Новизна.');
                    return false;
                }

                var _correct = getValue('corect');

                var textE = document.getElementById('TextEror').value;
                if (textE.style.display != 'none' && textE.length == 0) {
                    Swal.fire('Заполните текстовое поле содержания ошибок.');
                    return false;
                }
                var _znach = getValue('znach');

                var textZ = document.getElementById('TextZnach').value;
                if (textZ.length == 0) {
                    Swal.fire('Заполните текстовое поле для какого круга специалистов статья будет интересна.');
                    return false;
                }

                var _polnota = getValue('polnota');
                var _izloj = getValue('izloj');
                var _recomend = getValue('recomend');
                var _result = getValue('result');

                var textR = document.getElementById('TextResult').value;

                if (textR.length == 0) {
                    Swal.fire('Заполните текстовое поле для развернутой оценки содержания статьи.');
                    return false;
                }
                var textPolnota = document.getElementById('TextPolnota');

                if (textPolnota.style.display != 'none' && textPolnota.value.length == 0) {
                    Swal.fire('Заполните текстовое поле для полноты статьи.');
                    return false;
                }

                var textIzloj = document.getElementById('TextIzloj');
                if (textIzloj.style.display != 'none' && textIzloj.value.length == 0) {
                    Swal.fire('Заполните текстовое поле для ясности изложения.');
                    return false;
                }
                var _blocks = getValue('blocks');
                var _zakl = getValue('zakl');

                var textRecomend = document.getElementById('TextRecomend');
                if (textRecomend.style.display != 'none' && textRecomend.value.length == 0) {
                    Swal.fire('Заполните текстовое поле для рекомендации.');
                    return false;
                }
                return true;
            }
            */
        }
        function proverkaForResult() {
            if (!cheakCount('novizna', 'Новизна')) {
                return false;
            }
            return true;
        }
    </script>
    <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
        <div class="container">
            <a class="navbar-brand" asp-area="" asp-controller="Reviewer" asp-action="Index">Научный журнал</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
                <ul class="navbar-nav flex-grow-1">
                    <li class="nav-item">
                        <a class="submenu-link nav-link text-dark" href="../User/Enter">Выход</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <h3 style="text-align:center">Информация о публикации</h3>
    <form id="form" name="form" method="post">
        <input style="display:none" name="ID" id="ID" value="@Model.Item1.Id" />
        <label style="text-align:left; font-weight:bold">Название статьи:</label>
        <label>@Model.Item1.Title</label><br /><br />
        <!--class="needs-validation"-->
        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <label style="font-weight:bold">Ключевые слова:</label><br />
                    <textarea id="TextWords" name="words" cols="40" rows="12">@string.Join('\n', Model.Item1.KeyWords.ToArray())</textarea><br /><br />
                </div>

                <div class="col-sm">
                    <label style="font-weight:bold">Аннотация:</label><br />
                    <textarea id="TextAnnotation" name="annotation" cols="40" rows="12">@Model.Item1.Annotation</textarea><br /><br />
                </div>
            </div>
        </div>

        <h3 style="text-align:center">Инфромация для рецензирования:</h3>
        @if (Model.Item3.Length != 0)
        {
            <div class="alert alert-primary" role="alert">
                <strong>@Model.Item3.ElementAt(0)</strong>@Model.Item3.ElementAt(1)
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        }
        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <label style="font-weight:bold">Рубрика(и):</label><br />
                    <p id="categories">
                        @foreach (var c in Model.Item2)
                        {
                            <input id="Checkbox1" name="category" type="checkbox" value="@c">@c<br />
                        }
                    </p>

                    <label style="font-weight:bold">Новизна:</label>
                    <div id="novizna" onclick="return cheakCount('categories','Рубрика(и)')">
                        <input id="novizna1" name="novizna" type="checkbox"
                               value="Совершенно новые результаты">Совершенно новые результаты<br />
                        <input id="novizna2" name="novizna" type="checkbox"
                               value="Есть новые идеи">Есть новые идеи<br />
                        <input id="novizna3" name="novizna" type="checkbox"
                               value="Улучшают известные результаты">Улучшают известные результаты<br />
                        <input id="novizna4" name="novizna" type="checkbox"
                               value="Результаты известны">Результаты известны<br />
                    </div>
                    <div onclick="return cheakCount('novizna', 'Новизна');">
                        <label style="font-weight:bold">Укажите, в чем именно состоит новизна:</label><br />
                        <label>Минимальная длина должна быть от 120 символов.</label><br />
                        <textarea id="TextNew" style="width:auto" name="textNew" rows="10" minlength="120" required></textarea>
                    </div>
                    <div>
                        <label style="font-weight:bold">Корректность работы и полученных выводов:</label>
                        <p id="corect" onclick="return cheakText('TextNew','Новизна')">
                            <input id="corect1" name="corect" type="checkbox"
                                   value="Полностью корректно">Полностью корректно<br />
                            <input id="corect2" name="corect" type="checkbox"
                                   value="Не содержит явных ошибок">Не содержит явных ошибок<br />
                            <input id="corect3" name="corect" type="checkbox"
                                   value="Есть мелкие ошибки" onclick="printTextbox('TextErorrs');">Есть мелкие ошибки<br />
                            <input id="corect4" name="corect" type="checkbox"
                                   value="Есть серьезные ошибки" onclick="printTextbox('TextErorrs');">Есть серьезные ошибки<br />
                        </p>
                    </div>

                    <div id="TextErorrs" style="display:none">
                        <label style="font-weight:bold">Укажите, в чем именно содержатся ошибки:</label><br />
                        <textarea id="TextEror" name="textErorr" style="width:auto" rows="10" minlength="120"></textarea>
                    </div>

                    <div onclick="return cheakCount('corect', 'Корректность работы и полученных выводов');">
                        <label style="font-weight:bold">Значимость работы:</label><br>
                        <p id="znach" onclick="return cheakText('TextErorrs', 'Корректность работы');">
                            <input id="corect1" name="znach" type="checkbox"
                                   value="Интересна широкому кругу ученых">Интересна широкому кругу ученых<br />
                            <input id="corect2" name="znach" type="checkbox"
                                   value="Полезна">Полезна<br />
                            <input id="corect3" name="znach" type="checkbox"
                                   value="Для ограниченного круга">Для ограниченного круга<br />
                            <input id="corect4" name="znach" type="checkbox"
                                   value="Малоинтересна">Малоинтересна<br />
                        </p>
                    </div>
                    <div onclick="return cheakCount('znach', 'Значимость работы');">
                        <label style="font-weight:bold">
                            Укажите, для какого круга специалистов статья будет интересна, в том числе
                            практическую значимость работы, оцените перспективу реализации результатов.
                        </label>
                        <textarea id="TextZnach" name="textZnach" rows="10" minlength="120" required></textarea>
                    </div>
                </div>

                <div class="col-sm">
                    <label style="font-weight:bold">Полнота исследования:</label>
                    <p id="polnota">
                        <input id="polnota1" name="polnota" type="checkbox"
                               value="Исчерпывающее исследование">Исчерпывающее исследование<br />
                        <input id="polnota2" name="polnota" type="checkbox"
                               value="Достаточная полнота исследования">Достаточная полнота исследования<br />
                        <input id="polnota3" name="polnota" type="checkbox" onclick="printTextbox('TextPolnota')"
                               value="Необходимо дополнительное исследование">Необходимо дополнительное исследование<br />
                        <input id="polnota4" name="polnota" type="checkbox"
                               value="Совершенно недостаточно" onclick="printTextbox('TextPolnota')">Совершенно недостаточно<br />
                    </p>
                    <div id="TextPolnota" style="display:none">
                        <label style="font-weight:bold">Распишите более подробно:</label><br />
                        <textarea id="textPolnota" name="textPolnote" rows="10" minlength="120"></textarea><br />
                    </div>

                    <label style="font-weight:bold">Ясность изложения:</label>
                    <p id="izloj" onclick="return cheakCount('polnota', 'Полнота исследования');">
                        <input id="izloj1" name="izloj" type="checkbox"
                               value="Читается легко">Читается легко<br />
                        <input id="izloj2" name="izloj" type="checkbox"
                               value="Вполне ясно">Вполне ясно<br />
                        <input id="izloj3" name="izloj" type="checkbox"
                               value="Затруднительно для понимания" onclick="printTextbox('TextIzloj')">Затруднительно для понимания<br />
                        <input id="izloj4" name="izloj" type="checkbox"
                               value="Нечитаемо" onclick="printTextbox('TextIzloj')">Нечитаемо<br />
                    </p>
                    <div id="TextIzloj" style="display:none">
                        <label style="font-weight:bold">Распишите более подробно:</label><br />
                        <textarea id="textIzloj" name="textIzloj" rows="10" minlength="120"></textarea><br />
                    </div>

                    <label style="font-weight:bold">Рекомендации:</label>
                    <p id="recomend" onclick="return cheakCount('izloj', 'Ясность изложения');">
                        <input id="recomend1" name="recomends" type="checkbox"
                               value="Не нуждается в сокращении">Не нуждается в сокращении<br />
                        <input id="recomend2" name="recomends" type="checkbox"
                               value="Нуждается в сокращении">Нуждается в сокращении<br />
                        <input id="recomend3" name="recomends" type="checkbox"
                               value="Нуждается в переработке">Нуждается в переработке<br />
                        <input id="recomend4" name="recomends" type="checkbox"
                               value="Неоправданно много формул" onclick="printTextbox('TextRecomend')">Неоправданно много формул<br />
                        <input id="recomend5" name="recomends" type="checkbox"
                               value="Неоправданно много рисунков" onclick="printTextbox('TextRecomend')">Неоправданно много рисунков<br />
                        <input id="recomend6" name="recomends" type="checkbox"
                               value="Неоправданно много таблиц" onclick="printTextbox('TextRecomend')">Неоправданно много таблиц<br />
                        <input id="recomend7" name="recomends" type="checkbox"
                               value="Неоправданно много текста" onclick="printTextbox('TextRecomend')">Неоправданно много текста<br />
                    </p>
                    <div id="TextRecomend" style="display:none">
                        <label style="font-weight:bold">Распишите более подробно:</label><br />
                        <textarea id="textRecomend" name="textRecomend" rows="10" minlength="120"></textarea><br />
                    </div>
                </div>

                <div class="col-sm">
                    <label style="font-weight:bold">Общее впечатление от работы:</label>
                    <p id="result" onclick="return cheakCount('recomend', 'Рекомендации');">
                        <input id="result1" name="results" type="checkbox"
                               value="Отлично">Отлично<br />
                        <input id="result2" name="results" type="checkbox"
                               value="Хорошо">Хорошо<br />
                        <input id="result3" name="results" type="checkbox"
                               value="Удовлетворительно">Удовлетворительно<br />
                        <input id="result4" name="results" type="checkbox"
                               value="Плохо">Плохо<br />
                    </p>
                    <label style="font-weight:bold">Приведите ниже развернутую оценку содержания статьи:</label><br />
                    <textarea id="TextResult" name="textResult" rows="10" minlength="120" onclick="cheakCount('result','Общее впечатление от работы');" required></textarea><br />
                    <label style="font-weight:bold">
                        Наличие обязательных блоков текста: аннотации, ключевых слов, списка источников, авторского блока с адресами.
                        Соответствие техническим требованиям оформления: параметры страниц, стили, иллюстрации, библиография, рекомендуемый объем.
                    </label>
                    <p id="blocks">
                        <input id="result1" name="blocks" type="checkbox"
                               value="Полностью корректно">Полностью корректно<br />
                        <input id="result2" name="blocks" type="checkbox"
                               value="Есть мелкие ошибки">Есть мелкие ошибки<br />
                        <input id="result3" name="blocks" type="checkbox"
                               value="Есть серьезные ошибки">Есть серьезные ошибки<br />
                        <input id="result4" name="blocks" type="checkbox"
                               value="Не соответствует всем требованиям">Не соответствует всем требованиям<br />
                    </p>
                    <label style="font-weight:bold">Заключение о публикации статьи:</label>
                    <p id="zakl" onclick="return cheakCount('blocks', 'Наличие обязательных блоков текста');"
                       onchange="return cheakCount('zakl', 'Заключение о публикации статьи');">
                        <input id="result1" name="zakls" type="checkbox"
                               value="Опубликовать">Опубликовать<br />
                        <input id="result2" name="zakls" type="checkbox"
                               value="Опубликовать после устранения замечаний">Опубликовать после устранения замечаний<br />
                        <input id="result3" name="zakls" type="checkbox"
                               value="Требуются серьезная переработка и дополнительное рецензирование">
                        Требуются серьезная переработка и дополнительное рецензирование<br />
                        <input id="result4" name="zakls" type="checkbox"
                               value="Не рекомендуется к публикации">Не рекомендуется к публикации<br />
                    </p>
                </div>
            </div>


            <div class="row">
                <h3 style="text-align:center">Автор(ы)</h3>
                <br />
                <table class="table table-primary">
                    <thead>
                        <tr>
                            <th>Фамилия</th>
                            <th>Имя</th>
                            <th>Отчество</th>
                            <th>Почта</th>
                            <th>Номер телефона</th>
                            <th>Место работы</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var autor in Model.Item1.Autors)
                        {
                            <tr>
                                <td>@autor.LastName</td>
                                <td>@autor.Name</td>
                                <td>@autor.Otch</td>
                                <td>@autor.Email</td>
                                <td>@autor.Phone</td>
                                <td>@autor.Work</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
        <!--onclick="proverka()"-->
        <!--asp-controller="Reviewer" asp-action="CreateReview"-->
        <button id="ButtonSave" class="btn btn-lg btn-primary" type="submit" asp-controller="Reviewer" asp-action="CreateReview">Создать рецензию</button>
    </form>
</body>
</html>